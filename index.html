<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chiếu Dời Đô - Lý Thái Tổ</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Cormorant+Garamond:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body { background-color: black; margin: 0; overflow: hidden; }
        .font-thuphap { font-family: 'Dancing Script', cursive; }
        .font-noidung { font-family: 'Cormorant Garamond', serif; }

        .scroll-roller {
            background: linear-gradient(to bottom, #2a1810 0%, #5d4037 20%, #8d6e63 45%, #5d4037 55%, #2a1810 100%);
            box-shadow: 0 10px 20px rgba(0,0,0,0.8);
            position: relative;
            z-index: 50;
        }

        .roller-end {
            background: radial-gradient(circle at 30% 30%, #8d6e63, #3e2723, #1a100a);
            box-shadow: inset 0 0 10px rgba(0,0,0,0.8), 5px 0 15px rgba(0,0,0,0.5);
            border: 2px solid #3e2723;
        }

        .paper-bg {
            background-color: #e3cbae;
            background-image: url("https://www.transparenttextures.com/patterns/aged-paper.png");
            box-shadow: inset 0 0 100px rgba(0,0,0,0.4);
            transition: height 5000ms cubic-bezier(0.45, 0.05, 0.55, 0.95);
        }

        .clip-tassel {
            clip-path: polygon(0% 0%, 100% 0%, 100% 70%, 50% 100%, 0% 70%);
        }

        /* Animation cho chữ khi chuyển slide */
        .fade-in { animation: fadeIn 1s ease-in-out forwards; }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); filter: blur(5px); }
            to { opacity: 1; transform: translateY(0); filter: blur(0); }
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        const slides = [
            { title: "Chiếu Dời Đô", subtitle: "(Thiên Đô Chiếu)", content: "Lý Công Uẩn", subContent: "Năm 1010 - Triều Lý", isTitle: true },
            { title: "I. Tác Giả", heading: "Tiểu Sử & Năm Sinh", points: ["Tên: Lý Công Uẩn (974 – 1028).", "Tức: Lý Thái Tổ.", "Là người sáng lập ra vương triều nhà Lý.", "Trị vì đất nước từ năm 1009 đến năm 1028."] },
            { title: "I. Tác Giả", heading: "Quê Quán & Con Người", points: ["Quê quán: Hương Cổ Pháp (Bắc Ninh).", "Là người thông minh, nhân ái, có chí lớn.", "Có công lao to lớn thống nhất đất nước."] },
            { title: "II. Tìm Hiểu Chung", heading: "Hoàn Cảnh Sáng Tác", points: ["Năm Canh Tuất (1010), Lý Công Uẩn viết bài chiếu.", "Bối cảnh đất nước đang ổn định, cần trung tâm mới.", "Bày tỏ ý định dời đô từ Hoa Lư về Đại La."] },
            { title: "III. Phân Tích", heading: "Lợi Thế Địa Lý Đại La", points: ["Vị trí: Nằm ở nơi trung tâm trời đất.", "Thế đất: 'Rồng cuộn hổ ngồi' cực đẹp.", "Hướng: Đúng ngôi Nam, Bắc, Đông, Tây."] },
            { title: "IV. Tổng Kết", heading: "Nội Dung & Nghệ Thuật", points: ["Nghệ thuật: Lập luận sắc sảo, lý tình hài hòa.", "Nội dung: Khát vọng độc lập, tự cường dân tộc.", "Ý nghĩa: Mở ra thời kỳ hưng thịnh cho dân tộc."] }
        ];

        function App() {
            const [isStarted, setIsStarted] = useState(false);
            const [currentSlide, setCurrentSlide] = useState(0);
            const [isMuted, setIsMuted] = useState(false);
            const [isOpening, setIsOpening] = useState(false);
            const audioRef = useRef(null);

            const startPresentation = () => {
                setIsStarted(true);
                setIsOpening(true);
                if (audioRef.current && !isMuted) {
                    audioRef.current.play().catch(e => console.log(e));
                }
                setTimeout(() => setIsOpening(false), 5000);
            };

            const nextSlide = () => { if (currentSlide < slides.length - 1) setCurrentSlide(s => s + 1); };
            const prevSlide = () => { if (currentSlide > 0) setCurrentSlide(s => s - 1); };

            return (
                <div className="w-full h-screen flex items-center justify-center overflow-hidden font-serif">
                    <audio ref={audioRef} src="https://assets.mixkit.co/active_storage/sfx/2409/2409-preview.mp3" loop />

                    {!isStarted ? (
                        <div className="flex flex-col items-center z-50">
                            <h1 className="text-[#d8a45d] text-6xl md:text-8xl font-thuphap mb-12 animate-pulse">Chiếu Dời Đô</h1>
                            <div className="relative group cursor-pointer" onClick={startPresentation}>
                                <div className="w-[300px] md:w-[500px] h-12 scroll-roller rounded-full mb-[-8px]"></div>
                                <div className="w-[300px] md:w-[500px] h-12 scroll-roller rounded-full shadow-2xl"></div>
                                <div className="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-[#6b0000] p-4 rounded-full border-2 border-[#d8a45d] text-[#d8a45d]">
                                    <svg width="32" height="32" viewBox="0 0 24 24" fill="currentColor"><path d="M8 5v14l11-7z"/></svg>
                                </div>
                            </div>
                        </div>
                    ) : (
                        <div className="flex flex-col items-center">
                            {/* Trục trên */}
                            <div className="w-[90vw] max-w-4xl h-10 md:h-14 scroll-roller rounded-full flex justify-between px-2 z-20">
                                <div className="w-12 md:w-16 h-12 md:h-16 roller-end rounded-full -ml-6 md:-ml-10 self-center"></div>
                                <div className="w-12 md:w-16 h-12 md:h-16 roller-end rounded-full -mr-6 md:-mr-10 self-center"></div>
                            </div>

                            {/* Giấy chiếu */}
                            <div className="w-[85vw] max-w-3xl paper-bg relative overflow-hidden" style={{ height: isStarted ? '70vh' : '0' }}>
                                <div className="absolute inset-0 p-6 md:p-12 flex items-center justify-center">
                                    {slides.map((s, i) => (
                                        <div key={i} className={`absolute inset-0 p-8 flex flex-col items-center justify-center transition-opacity duration-1000 ${currentSlide === i ? 'opacity-100' : 'opacity-0 pointer-events-none'}`}>
                                            {s.isTitle ? (
                                                <div className="fade-in text-center">
                                                    <h2 className="text-6xl md:text-8xl font-thuphap text-[#6b0000] mb-4">{s.title}</h2>
                                                    <p className="text-xl md:text-2xl italic text-[#3e2723] mb-8">{s.subtitle}</p>
                                                    <div className="w-24 h-1 bg-[#6b0000] mx-auto mb-6 opacity-40"></div>
                                                    <p className="text-3xl md:text-5xl font-bold uppercase tracking-widest">{s.content}</p>
                                                    <p className="mt-4 text-[#5d4037]">{s.subContent}</p>
                                                </div>
                                            ) : (
                                                <div className="fade-in w-full">
                                                    <h3 className="text-[#800000] font-thuphap text-4xl md:text-6xl mb-8 border-b border-red-800/20 pb-4 inline-block">{s.heading}</h3>
                                                    <ul className="text-left space-y-4 max-w-xl mx-auto">
                                                        {s.points.map((p, idx) => (
                                                            <li key={idx} className="flex gap-3 text-xl md:text-2xl font-noidung text-[#2d1b0d]">
                                                                <span className="text-red-800">❧</span> {p}
                                                            </li>
                                                        ))}
                                                    </ul>
                                                </div>
                                            )}
                                        </div>
                                    ))}
                                </div>
                            </div>

                            {/* Trục dưới */}
                            <div className="w-[90vw] max-w-4xl h-10 md:h-14 scroll-roller rounded-full flex justify-between px-2 mt-[-2px] z-20">
                                <div className="w-12 md:w-16 h-12 md:h-16 roller-end rounded-full -ml-6 md:-ml-10 self-center"></div>
                                <div className="w-12 md:w-16 h-12 md:h-16 roller-end rounded-full -mr-6 md:-mr-10 self-center"></div>
                                {/* Tua rua */}
                                <div className="absolute left-10 bottom-[-40px] w-3 h-12 bg-red-900 clip-tassel"></div>
                                <div className="absolute right-10 bottom-[-40px] w-3 h-12 bg-red-900 clip-tassel"></div>
                            </div>

                            {/* Điều khiển */}
                            {!isOpening && (
                                <div className="fixed bottom-6 flex gap-8 items-center bg-black/40 backdrop-blur p-3 px-6 rounded-full border border-white/10 fade-in">
                                    <button onClick={prevSlide} disabled={currentSlide === 0} className="text-[#d8a45d] disabled:opacity-20">
                                        <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="m15 18-6-6 6-6"/></svg>
                                    </button>
                                    <span className="text-[#d8a45d] font-noidung text-xl">{currentSlide + 1} / {slides.length}</span>
                                    <button onClick={nextSlide} disabled={currentSlide === slides.length - 1} className="text-[#d8a45d] disabled:opacity-20">
                                        <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="m9 18 6-6-6-6"/></svg>
                                    </button>
                                    <button onClick={() => setIsStarted(false)} className="text-[#d8a45d] ml-4">
                                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"/><path d="M3 3v5h5"/></svg>
                                    </button>
                                </div>
                            )}
                        </div>
                    )}
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>

